# TaskFlow API Documentation

This document outlines the API endpoints for the TaskFlow application, intended to be implemented using Java Spring Boot.

## Base URL

The API base URL will be `/api`.

## Authentication

Authentication is not yet fully defined but will likely involve JWT tokens. Authenticated endpoints will require an `Authorization: Bearer <token>` header. For now, user context might be implicitly handled or mocked on the backend.

## Data Models

The primary data models are defined in the React application under `src/types/index.ts`. They are:

*   **`User`**:
    *   `id: string`
    *   `email: string`
    *   `name: string`
*   **`Task`**:
    *   `id: string` (Generated by backend)
    *   `text: string`
    *   `done: boolean`
    *   `createdAt: string` (ISO 8601 date string, generated by backend)
*   **`TodoList`**:
    *   `id: string` (Generated by backend)
    *   `title: string`
    *   `tasks: Task[]`
    *   `createdAt: string` (ISO 8601 date string, generated by backend)
    *   `userId: string` (Assuming lists are associated with a user)

---

## API Endpoints

### 1. Get All Todo Lists for User

*   **Method**: `GET`
*   **Path**: `/lists`
*   **Description**: Retrieves all todo lists associated with the authenticated user.
*   **Request Body**: None
*   **Success Response**:
    *   **Code**: `200 OK`
    *   **Body**: `TodoList[]`
      ```json
      [
        {
          "id": "list1",
          "title": "Groceries",
          "tasks": [
            { "id": "task1", "text": "Milk", "done": false, "createdAt": "2023-01-01T10:00:00Z" },
            { "id": "task2", "text": "Bread", "done": true, "createdAt": "2023-01-01T10:05:00Z" }
          ],
          "createdAt": "2023-01-01T09:00:00Z",
          "userId": "user123"
        }
      ]
      ```
*   **Error Responses**:
    *   `401 Unauthorized`: If the user is not authenticated.
    *   `500 Internal Server Error`: If there's a server-side issue.

### 2. Create a New Todo List

*   **Method**: `POST`
*   **Path**: `/lists`
*   **Description**: Creates a new todo list for the authenticated user.
*   **Request Body**:
    ```json
    {
      "title": "New List Title"
    }
    ```
*   **Success Response**:
    *   **Code**: `201 CREATED`
    *   **Body**: `TodoList` (The newly created list with backend-generated `id` and `createdAt`)
      ```json
      {
        "id": "listNew",
        "title": "New List Title",
        "tasks": [],
        "createdAt": "2023-01-02T11:00:00Z",
        "userId": "user123"
      }
      ```
*   **Error Responses**:
    *   `400 Bad Request`: If the request body is invalid (e.g., missing title).
    *   `401 Unauthorized`.
    *   `500 Internal Server Error`.

### 3. Delete a Todo List

*   **Method**: `DELETE`
*   **Path**: `/lists/{listId}`
*   **Description**: Deletes a specific todo list by its ID.
*   **Request Body**: None
*   **Success Response**:
    *   **Code**: `204 No Content`
*   **Error Responses**:
    *   `401 Unauthorized`.
    *   `403 Forbidden`: If the user does not own the list.
    *   `404 Not Found`: If the list with the given ID doesn't exist.
    *   `500 Internal Server Error`.

### 4. Update a Todo List (including Tasks)

*   **Method**: `PUT`
*   **Path**: `/lists/{listId}`
*   **Description**: Updates an existing todo list. This endpoint is used to update the list's title and/or its tasks (adding, removing, updating tasks). The entire `TodoList` object, including all tasks, should be sent. The backend will replace the existing list data with the provided data. Task IDs should be preserved if they exist, new tasks won't have an ID (backend generates it), and tasks not present in the request will be removed.
*   **Request Body**: `TodoList`
    ```json
    {
      "id": "list1", // Must match listId in path
      "title": "Updated Groceries List",
      "tasks": [
        // Existing task, potentially updated
        { "id": "task1", "text": "Almond Milk", "done": false, "createdAt": "2023-01-01T10:00:00Z" },
        // New task (no id, backend will generate)
        { "text": "Eggs", "done": false },
        // Task "Bread" (task2) from original example is omitted, so it would be deleted.
      ],
      "createdAt": "2023-01-01T09:00:00Z", // Original creation date, should not be changed by client for update
      "userId": "user123"
    }
    ```
    *Note: For task updates, especially creating new tasks, the backend should handle ID generation and `createdAt` timestamps for new tasks.*
*   **Success Response**:
    *   **Code**: `200 OK`
    *   **Body**: `TodoList` (The updated list, with any new task IDs and timestamps populated)
*   **Error Responses**:
    *   `400 Bad Request`: If the request body is invalid or `listId` in path and body mismatch.
    *   `401 Unauthorized`.
    *   `403 Forbidden`.
    *   `404 Not Found`.
    *   `500 Internal Server Error`.

---

This documentation provides a baseline for the API. Details regarding specific validation rules, pagination (if needed for `GET /lists`), and more complex query parameters can be added as development progresses.
